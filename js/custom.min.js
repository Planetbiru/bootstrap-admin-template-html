function initSortTable(){$("table.table-sort-by-column").each(function(t,e){let a=$(this);a.attr("data-self-name");let i=document.location.toString(),r=(i=i.split("#")[0]).split("?");i=r[0];let n=(r[1]||"").split("&"),o={};for(let d in n){let l=n[d].split("=");""!=l[0]&&(o[l[0]]=l[1])}let c=o.ordertype||"",s=o.orderby||"";a.find("td.order-controll").each(function(t,e){let a=$(this),r=a.attr("data-col-name");s==r?"asc"==c?(o.ordertype="desc",a.attr("data-order-method","asc")):(o.ordertype="asc",a.attr("data-order-method","desc")):o.ordertype="asc",o.orderby=r;let n=[];for(let d in o)n.push(d+"="+o[d]);let l=i+"?"+n.join("&");a.find(" > a").attr("href",l)})})}function initDatetimePicker(){$('input[type="date"]').each(function(t,e){let a=$(this);a.attr("type","text"),a.addClass("date-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper date">\r\n'+i+"\r\n</div>\r\n")}),$('input[type="time"]').each(function(t,e){let a=$(this);a.attr("type","text"),a.addClass("time-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper time">\r\n'+i+"\r\n</div>\r\n")}),$('input[type="datetime-local"]').each(function(t,e){let a=$(this);a.attr("type","text"),a.addClass("date-time-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper date-time">\r\n'+i+"\r\n</div>\r\n")}),$(".date-picker").length&&$(".date-picker").each(function(){var t=$(this).data("mindate")||!1,e=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:t,maxDate:e,format:"YYYY-MM-DD",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")})}),$(".time-picker").length&&$(".time-picker").datetimepicker({format:"HH:mm:ss",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")}),$(".date-time-picker").length&&$(".date-time-picker").each(function(){var t=$(this).data("mindate")||!1,e=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:t,maxDate:e,format:"YYYY-MM-DD HH:mm:ss",useCurrent:"day",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")})})}function initSortData(){$("tbody.data-table-manual-sort").each(function(){let t=$(this)[0];Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})})}function initCheckAll(){$("table").each(function(){$(".check-master").length>0&&$(".check-master").each(function(){$(this).on("change",function(){let t=$(this)[0].checked,e=$(this).attr("data-selector");$(this).closest("table").find(".check-slave").filter(e).each(function(){$(this)[0].checked=t})})})})}function initAjaxSupport(){0==$('[data-ajax-support="true"]').length&&$(document).on("click",'[type="submit"][name="user_action"][value="delete"]',function(t){confirm($(this).attr("data-onclik-message"))||(t.preventDefault(),t.stopPropagation())})}function initMultipleSelect(){document.querySelectorAll("select[multiple]").forEach(t=>new MultiSelect(t))}function initAllData(){initCheckAll(),initAjaxSupport(),initDatetimePicker(),initMultipleSelect(),initSortTable(),initSortData(window.location.search)}function initOrderUrl(t){let e=new URLSearchParams(t),a=e.get("orderby"),i=e.get("ordertype");if(void 0!==a){let r=$("<input />");r.attr("type","hidden"),r.attr("name","orderby"),r.attr("value",a),$('form.filter-form [name="orderby"]').length&&$('form.filter-form [name="orderby"]').remove(),$("form.filter-form").append(r)}if(void 0!==i){let n=$("<input />");n.attr("type","hidden"),n.attr("name","ordertype"),n.attr("value",i),$('form.filter-form [name="ordertype"]').length&&$('form.filter-form [name="ordertype"]').remove(),$("form.filter-form").append(n)}}function updateNumber(t){let e=t.closest("form");e.find("span.new-sort-order").length&&e.find("span.new-sort-order").remove();let a=$("<span />");a.addClass("new-sort-order"),e.append(a);let i=parseInt(t.attr("data-offset")),r=0;t.find("tr").each(function(t){let e=$(this),n=i+ ++r;e.find(".data-number").text(n);let o=e.attr("data-primary-key"),d=$("<input />");d.attr({type:"hidden",name:"new_order[]",value:JSON.stringify({primary_key:o,sort_order:n})}),a.append(d)}),t.closest("form").find('button[name="user_action"][value="sort_order"]').removeAttr("disabled")}function saveOrder(){}function splitWithTail(t,e,a){let i=t.split(e),r=i.slice(a).join(e),n=i.slice(0,a);return n.push(r),n}jQuery(function(t){initAllData(),initOrderUrl(window.location.search)});