function initDateTimePicker(){$('input[type="date"]').each(function(e,t){let i=$(this);i.attr("type","text"),i.addClass("date-picker");let r=i[0].outerHTML;i.replaceWith('<div class="input-datetime-wrapper date">\r\n'+r+"\r\n</div>\r\n")}),$('input[type="time"]').each(function(e,t){let i=$(this);i.attr("type","text"),i.addClass("time-picker");let r=i[0].outerHTML;i.replaceWith('<div class="input-datetime-wrapper time">\r\n'+r+"\r\n</div>\r\n")}),$('input[type="datetime-local"]').each(function(e,t){let i=$(this);i.attr("type","text"),i.addClass("date-time-picker");let r=i[0].outerHTML;i.replaceWith('<div class="input-datetime-wrapper date-time">\r\n'+r+"\r\n</div>\r\n")}),$(".date-picker").length&&$(".date-picker").each(function(){let e=$(this).data("mindate")||!1,t=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:e,maxDate:t,format:"YYYY-MM-DD",debug:!1}).on("dp.change",function(e){$(this).datetimepicker("hide")})}),$(".time-picker").length&&$(".time-picker").datetimepicker({format:"HH:mm:ss",debug:!1}).on("dp.change",function(e){$(this).datetimepicker("hide")}),$(".date-time-picker").length&&$(".date-time-picker").each(function(){let e=$(this).data("mindate")||!1,t=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:e,maxDate:t,format:"YYYY-MM-DD HH:mm:ss",useCurrent:"day",debug:!1}).on("dp.change",function(e){$(this).datetimepicker("hide")})})}function initSortTable(){let e=document.querySelectorAll("table.table-sort-by-column");e.forEach(function(e){e.getAttribute("data-self-name");let t=document.location.toString(),i=(t=t.split("#")[0]).split("?");t=i[0];let r=(i[1]||"").split("&"),a={};r.forEach(function(e){let t=e.split("=");""!==t[0]&&(a[t[0]]=t[1])});let n=a.ordertype||"",o=a.orderby||"",l=e.querySelectorAll("td.order-controll");l.forEach(function(e){let i=e.getAttribute("data-col-name");o===i?"asc"===n?(a.ordertype="desc",e.setAttribute("data-order-method","asc")):(a.ordertype="asc",e.setAttribute("data-order-method","desc")):a.ordertype="asc",a.orderby=i;let r=[];for(let l in a)a.hasOwnProperty(l)&&r.push(l+"="+a[l]);let d=t+"?"+r.join("&"),c=e.querySelector("a");c&&c.setAttribute("href",d)})})}function initSortData(){document.querySelectorAll("tbody.data-table-manual-sort").forEach(function(e){Sortable.create(e,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(e))}})})}function initCheckAll(){document.querySelectorAll("table").forEach(function(e){let t=e.querySelector(".check-master");t&&t.addEventListener("change",function(){let i=t.checked,r=t.getAttribute("data-selector");e.querySelectorAll(".check-slave"+r).forEach(function(e){e.checked=i})})})}function initAjaxSupport(){0===document.querySelectorAll('[data-ajax-support="true"]').length&&document.addEventListener("click",function(e){let t=e.target;if(t&&"submit"===t.type&&"user_action"===t.name&&"delete"===t.value){let i=t.getAttribute("data-onclik-message");confirm(i)||(e.preventDefault(),e.stopPropagation())}})}function initMultipleSelect(){document.querySelectorAll("select[multiple]").forEach(e=>new MultiSelect(e))}function initOrderUrl(e){let t=new URLSearchParams(e),i=t.get("orderby"),r=t.get("ordertype");if(void 0!==i){let a=$("<input />");a.attr("type","hidden"),a.attr("name","orderby"),a.attr("value",i),$('form.filter-form [name="orderby"]').length&&$('form.filter-form [name="orderby"]').remove(),$("form.filter-form").append(a)}if(void 0!==r){let n=$("<input />");n.attr("type","hidden"),n.attr("name","ordertype"),n.attr("value",r),$('form.filter-form [name="ordertype"]').length&&$('form.filter-form [name="ordertype"]').remove(),$("form.filter-form").append(n)}}function updateNumber(e){let t=e.closest("form");t.find("span.new-sort-order").length&&t.find("span.new-sort-order").remove();let i=$("<span />");i.addClass("new-sort-order"),t.append(i);let r=parseInt(e.attr("data-offset")),a=0;e.find("tr").each(function(e){let t=$(this),n=r+ ++a;t.find(".data-number").text(n);let o=t.attr("data-primary-key"),l=$("<input />");l.attr({type:"hidden",name:"new_order[]",value:JSON.stringify({primary_key:o,sort_order:n})}),i.append(l)}),e.closest("form").find('button[name="user_action"][value="sort_order"]').removeAttr("disabled")}function saveOrder(){}function splitWithTail(e,t,i){let r=e.split(t),a=r.slice(i).join(t),n=r.slice(0,i);return n.push(a),n}function initNotifications(e){let t=document.querySelector("#notificationMenu");e.forEach(e=>{let i=document.createElement("a");i.className="dropdown-item",i.href=e.link,i.innerHTML=`${e.message} <small class="text-muted">${e.time}</small>`,i.dataset.id=e.id,t.appendChild(i)})}function initMessages(e){let t=document.querySelector("#messageMenu");e.forEach(e=>{let i=document.createElement("a");i.className="dropdown-item",i.href=e.link,i.innerHTML=`${e.message} <small class="text-muted">${e.time}</small>`,i.dataset.id=e.id,t.appendChild(i)})}function initPage(){document.querySelectorAll(".toggle-sidebar").forEach(e=>{e.addEventListener("click",()=>{document.body.clientWidth>=992?document.body.classList.toggle("sidebar-hidden"):document.body.classList.toggle("sidebar-show");let e=document.body.classList.contains("sidebar-hidden");window.localStorage.setItem("sidebarHidden",e?"true":"false")})}),document.querySelector(".toggle-mode").addEventListener("click",()=>{document.body.classList.toggle("dark-mode"),document.body.classList.toggle("light-mode");let e="";e=document.body.classList.contains("dark-mode")?"dark-mode":"light-mode",window.localStorage.setItem("colorMode",e)})}document.addEventListener("DOMContentLoaded",()=>{initPage(),initNotifications(notifications),initMessages(messages),initCheckAll(),initAjaxSupport(),initDateTimePicker(),initMultipleSelect(),initSortTable(),initSortData(),initOrderUrl(window.location.search)});