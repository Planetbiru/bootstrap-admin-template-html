function initDateTimePicker(){$('input[type="date"]').each(function(t,e){let a=$(this);if(!a.prop("data-multiple-input")){a.attr("type","text"),a.addClass("date-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper date">\r\n'+i+"\r\n</div>\r\n")}}),$('input[type="time"]').each(function(t,e){let a=$(this);if(!a.prop("data-multiple-input")){a.attr("type","text"),a.addClass("time-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper time">\r\n'+i+"\r\n</div>\r\n")}}),$('input[type="datetime-local"]').each(function(t,e){let a=$(this);if(!a.prop("data-multiple-input")){a.attr("type","text"),a.addClass("date-time-picker");let i=a[0].outerHTML;a.replaceWith('<div class="input-datetime-wrapper date-time">\r\n'+i+"\r\n</div>\r\n")}}),$(".date-picker").length&&$(".date-picker").each(function(){let t=$(this).data("mindate")||!1,e=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:t,maxDate:e,format:"YYYY-MM-DD",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")})}),$(".time-picker").length&&$(".time-picker").datetimepicker({format:"HH:mm:ss",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")}),$(".date-time-picker").length&&$(".date-time-picker").each(function(){let t=$(this).data("mindate")||!1,e=$(this).data("maxdate")||!1;$(this).datetimepicker({minDate:t,maxDate:e,format:"YYYY-MM-DD HH:mm:ss",useCurrent:"day",debug:!1}).on("dp.change",function(t){$(this).datetimepicker("hide")})})}function initSortTable(){let t=document.querySelectorAll("table.table-sort-by-column");t.forEach(function(t){t.getAttribute("data-self-name");let e=document.location.toString(),a=(e=e.split("#")[0]).split("?");e=a[0];let i=(a[1]||"").split("&"),r={};i.forEach(function(t){let e=t.split("=");""!==e[0]&&(r[e[0]]=e[1])});let n=r.ordertype||"",l=r.orderby||"",o=t.querySelectorAll("td.order-controll");o.forEach(function(t){let a=t.getAttribute("data-col-name");l===a?"asc"===n?(r.ordertype="desc",t.setAttribute("data-order-method","asc")):(r.ordertype="asc",t.setAttribute("data-order-method","desc")):r.ordertype="asc",r.orderby=a;let i=[];for(let o in r)r.hasOwnProperty(o)&&i.push(o+"="+r[o]);let d=e+"?"+i.join("&"),c=t.querySelector("a");c&&c.setAttribute("href",d)})})}function initSortData(){document.querySelectorAll("tbody.data-table-manual-sort").forEach(function(t){Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})})}function initCheckAll(){document.querySelectorAll("table").forEach(function(t){let e=t.querySelector(".check-master");e&&e.addEventListener("change",function(){let a=e.checked,i=e.getAttribute("data-selector");t.querySelectorAll(".check-slave"+i).forEach(function(t){t.checked=a})})})}function initAjaxSupport(){0===document.querySelectorAll('[data-ajax-support="true"]').length&&document.addEventListener("click",function(t){let e=t.target;if(e&&"submit"===e.type&&"user_action"===e.name&&"delete"===e.value){let a=e.getAttribute("data-onclik-message");confirm(a)||(t.preventDefault(),t.stopPropagation())}})}function initMultipleInput(){document.querySelectorAll("input[data-multiple-input]").forEach(function(t){t.setAttribute("data-original-class",t.getAttribute("class")||"")})}function initMultipleSelect(){document.querySelectorAll("select[multiple]").forEach(t=>new MultiSelect(t))}function initOrderUrl(t){let e=new URLSearchParams(t),a=e.get("orderby"),i=e.get("ordertype");if(void 0!==a){let r=$("<input />");r.attr("type","hidden"),r.attr("name","orderby"),r.attr("value",a),$('form.filter-form [name="orderby"]').length&&$('form.filter-form [name="orderby"]').remove(),$("form.filter-form").append(r)}if(void 0!==i){let n=$("<input />");n.attr("type","hidden"),n.attr("name","ordertype"),n.attr("value",i),$('form.filter-form [name="ordertype"]').length&&$('form.filter-form [name="ordertype"]').remove(),$("form.filter-form").append(n)}}function updateNumber(t){let e=t.closest("form");e.find("span.new-sort-order").length&&e.find("span.new-sort-order").remove();let a=$("<span />");a.addClass("new-sort-order"),e.append(a);let i=parseInt(t.attr("data-offset")),r=0;t.find("tr").each(function(t){let e=$(this),n=i+ ++r;e.find(".data-number").text(n);let l=e.attr("data-primary-key"),o=$("<input />");o.attr({type:"hidden",name:"new_order[]",value:JSON.stringify({primary_key:l,sort_order:n})}),a.append(o)}),t.closest("form").find('button[name="user_action"][value="sort_order"]').removeAttr("disabled")}function saveOrder(){}function splitWithTail(t,e,a){let i=t.split(e),r=i.slice(a).join(e),n=i.slice(0,a);return n.push(r),n}function initNotifications(t){if(null!=t){let e=document.querySelector("#notificationMenu");e.innerHTML="",t.data.forEach(t=>{let a=document.createElement("a");a.className="dropdown-item",a.href=t.link,a.innerHTML=`${t.message} <small class="text-muted">${t.time}</small>`,a.dataset.id=t.id,e.appendChild(a)});let a="";t.totalData>99?a="99+":t.totalData>0&&t.totalData<=99&&(a=t.totalData),e.closest("li.nav-item").setAttribute("data-badge",a)}}function initMessages(t){if(null!=t){let e=document.querySelector("#messageMenu");e.innerHTML="",t.data.forEach(t=>{let a=document.createElement("a");a.className="dropdown-item",a.href=t.link,a.innerHTML=`${t.message} <small class="text-muted">${t.time}</small>`,a.dataset.id=t.id,e.appendChild(a)});let a="";t.totalData>99?a="99+":t.totalData>0&&t.totalData<=99&&(a=t.totalData),e.closest("li.nav-item").setAttribute("data-badge",a)}}function initPage(){document.querySelectorAll(".toggle-sidebar").forEach(t=>{t.addEventListener("click",()=>{document.body.clientWidth>=992?document.body.classList.toggle("sidebar-hidden"):document.body.classList.toggle("sidebar-show");let t=document.body.classList.contains("sidebar-hidden");window.localStorage.setItem("sidebarHidden",t?"true":"false")})}),document.querySelector(".toggle-mode").addEventListener("click",()=>{document.body.classList.toggle("dark-mode"),document.body.classList.toggle("light-mode");let t="";t=document.body.classList.contains("dark-mode")?"dark-mode":"light-mode",window.localStorage.setItem("colorMode",t)})}document.addEventListener("DOMContentLoaded",()=>{initPage(),initNotifications(notifications),initMessages(messages),initCheckAll(),initAjaxSupport(),initMultipleInput(),initMultipleSelect(),initDateTimePicker(),initSortTable(),initSortData(),initOrderUrl(window.location.search)});