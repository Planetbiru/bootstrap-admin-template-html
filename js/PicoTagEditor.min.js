function PicoTagEditor(t,e,i){e=e||{},this.settings={debug:!1,width:void 0,height:void 0,minWidth:void 0,maxHeight:void 0,trimInput:!1,...e},this.containerElement=null,this.name="",this.mouseEnter=!1,this.inputElement=null,this.timeout=null,this.values=[],this.placeholder="",this.init=function(t){let e=document.createElement("div");e.classList.add("pico-tag-editor");let i=t.cloneNode(!0),n=document.createElement("div");n.classList.add("tags-container"),n.style.display="none",["width","height","maxHeight","minWidth"].forEach(t=>{this.settings[t]&&(n.style[t]=this.isNumber(this.settings[t])?`${this.settings[t]}px`:this.settings[t])}),e.appendChild(i),e.appendChild(n),t.replaceWith(e),this.containerElement=e,this.inputElement=i,this.name=i.getAttribute("name")||"",this.name.includes("[")||(this.name+="[]"),i.classList.contains("pico-tag-edit")||i.classList.add("pico-tag-edit"),this.placeholder=i.getAttribute("placeholder")||""},this.isNumber=function(t){return/^-?\d+(\.\d+)?$/.test(t)},this.addEvents=function(){let t=this.containerElement.querySelector(".pico-tag-edit");t&&(t.addEventListener("keypress",t=>{"Enter"===t.key&&t.target.value.trim()&&(n.addTag(n.settings.trimInput?t.target.value.trim():t.target.value),t.target.value="",t.preventDefault())}),t.addEventListener("focus",()=>n.containerElement.setAttribute("data-focus","true")),t.addEventListener("blur",()=>{n.containerElement.setAttribute("data-focus",n.settings.debug||n.mouseEnter?"true":"false")}),["mouseenter","mouseleave"].forEach(t=>{this.containerElement.addEventListener(t,()=>{n.mouseEnter="mouseenter"===t,n.timeout&&clearTimeout(n.timeout),n.mouseEnter||(n.timeout=setTimeout(()=>n.containerElement.setAttribute("data-focus","false"),1500))})}))},this.addTag=function(t){let e=this.containerElement.querySelector(".tags-container"),i=document.createElement("div");i.classList.add("pico-tag"),i.textContent=t;let s=document.createElement("input");s.type="hidden",s.name=this.name,s.value=t,i.appendChild(s);let a=document.createElement("span");a.innerHTML="&times;",a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.removeChild(i),n.containerElement.querySelector(".pico-tag-edit").focus(),n.updateValues(),e.querySelector(".pico-tag")||(e.style.display="none")}),i.appendChild(a),e.appendChild(i),e.style.display="",this.updateValues()},this.updateValues=function(){this.values=[];let t=this.containerElement.querySelectorAll('.pico-tag input[type="hidden"]');if(void 0!==t)for(let e of t)this.values.push(e.value);this.containerElement.querySelector(".pico-tag-edit").setAttribute("placeholder",this.values.length>0?`[${this.values.join(", ")}]`:this.placeholder)};let n=this;this.init(t),i&&i(this.inputElement,this.containerElement,this),this.addEvents()}