/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */ !function t(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():window.Sortable=e()}(function t(){"use strict";if("undefined"==typeof window||!window.document)return function t(){throw Error("Sortable.js requires a window with a document")};var e,n,i,o,a,r,s,l,c,h,d,u,f,p,g,v,m,b,$,D,y,C={},S=/\s+/g,T=/left|right|inline/,_="Sortable"+new Date().getTime(),w=window,E=w.document,x=w.parseInt,N=w.jQuery||w.Zepto,k=w.Polymer,B=!1,Y="draggable"in E.createElement("div"),X=!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&((e=E.createElement("x")).style.cssText="pointer-events:auto","auto"===e.style.pointerEvents),O=!1,A=Math.abs,P=Math.min,R=[],M=[],I=ti(function(t,e,n){if(n&&e.scroll){var i,o,a,r,s,l,u=n[_],f=e.scrollSensitivity,p=e.scrollSpeed,g=t.clientX,v=t.clientY,m=window.innerWidth,b=window.innerHeight;if(h!==n&&(c=e.scroll,h=n,d=e.scrollFn,!0===c)){c=n;do if(c.offsetWidth<c.scrollWidth||c.offsetHeight<c.scrollHeight)break;while(c=c.parentNode)}c&&(i=c,a=(A((o=c.getBoundingClientRect()).right-g)<=f)-(A(o.left-g)<=f),r=(A(o.bottom-v)<=f)-(A(o.top-v)<=f)),!(a||r)&&(a=(m-g<=f)-(g<=f),r=(b-v<=f)-(v<=f),(a||r)&&(i=w)),(C.vx!==a||C.vy!==r||C.el!==i)&&(C.el=i,C.vx=a,C.vy=r,clearInterval(C.pid),i&&(C.pid=setInterval(function(){if(l=r?r*p:0,s=a?a*p:0,"function"==typeof d)return d.call(u,s,l,t);i===w?w.scrollTo(w.pageXOffset+s,w.pageYOffset+l):(i.scrollTop+=l,i.scrollLeft+=s)},24)))}},30),L=function(t){function e(t,e){return((void 0===t||!0===t)&&(t=n.name),"function"==typeof t)?t:function(n,i){var o=i.options.group.name;return e?t:t&&(t.join?t.indexOf(o)>-1:o==t)}}var n={},i=t.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n};function F(t,e){if(!(t&&t.nodeType&&1===t.nodeType))throw"Sortable: `el` must be HTMLElement, and not "+({}).toString.call(t);this.el=t,this.options=e=to({},e),t[_]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in n)i in e||(e[i]=n[i]);for(var o in L(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&Y,j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart),j(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),M.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function U(t,e){"clone"!==t.lastPullMode&&(e=!0),a&&a.state!==e&&(z(a,"display",e?"none":""),!e&&a.state&&(t.options.group.revertClone?(r.insertBefore(a,s),t._animate(n,a)):r.insertBefore(a,n)),a.state=e)}function H(t,e,n){if(t){n=n||E;do if(">*"===e&&t.parentNode===n||tn(t,e))return t;while(t=W(t))}return null}function W(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function j(t,e,n){t.addEventListener(e,n,B)}function V(t,e,n){t.removeEventListener(e,n,B)}function q(t,e,n){if(t){if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(S," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(S," ")}}}function z(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return E.defaultView&&E.defaultView.getComputedStyle?n=E.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function G(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function Q(t,e,n,i,o,r,s){t=t||e[_];var l=E.createEvent("Event"),c=t.options,h="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=e,l.from=o||e,l.item=i||e,l.clone=a,l.oldIndex=r,l.newIndex=s,e.dispatchEvent(l),c[h]&&c[h].call(t,l)}function Z(t,e,n,i,o,a,r,s){var l,c,h=t[_],d=h.options.onMove;return(l=E.createEvent("Event")).initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=a||e.getBoundingClientRect(),l.willInsertAfter=s,t.dispatchEvent(l),d&&(c=d.call(h,l,r)),c}function J(t){t.draggable=!1}function K(){O=!1}function tt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function te(t,e){var n=0;if(!t||!t.parentNode)return -1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&(">*"===e||tn(t,e))&&n++;return n}function tn(t,e){if(t){var n=(e=e.split(".")).shift().toUpperCase(),i=RegExp("\\s("+e.join("|")+")(?=\\s)","g");return(""===n||t.nodeName.toUpperCase()==n)&&(!e.length||((" "+t.className+" ").match(i)||[]).length==e.length)}return!1}function ti(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function to(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ta(t){return N?N(t).clone(!0)[0]:k&&k.dom?k.dom(t).cloneNode(!0):t.cloneNode(!0)}F.prototype={constructor:F,_onTapStart:function(t){var e,i=this,o=this.el,a=this.options,r=a.preventOnFilter,s=t.type,c=t.touches&&t.touches[0],h=(c||t).target,d=t.target.shadowRoot&&t.path&&t.path[0]||h,u=a.filter;if(function t(e){for(var n=e.getElementsByTagName("input"),i=n.length;i--;){var o=n[i];o.checked&&R.push(o)}}(o),!(n||/mousedown|pointerdown/.test(s)&&0!==t.button)&&!a.disabled&&(h=H(h,a.draggable,o))&&l!==h){if(e=te(h,a.draggable),"function"==typeof u){if(u.call(this,t,h,this)){Q(i,d,"filter",h,o,e),r&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(t){if(t=H(d,t.trim(),o))return Q(i,t,"filter",h,o,e),!0}))){r&&t.preventDefault();return}(!a.handle||H(d,a.handle,o))&&this._prepareDragStart(t,c,h,e)}},_prepareDragStart:function(t,e,o,a){var c,h=this,d=h.el,u=h.options,f=d.ownerDocument;o&&!n&&o.parentNode===d&&($=t,r=d,i=(n=o).parentNode,s=n.nextSibling,l=o,m=u.group,g=a,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,n.style["will-change"]="transform",c=function(){h._disableDelayedDrag(),n.draggable=h.nativeDraggable,q(n,u.chosenClass,!0),h._triggerDragStart(t,e),Q(h,r,"choose",n,r,g)},u.ignore.split(",").forEach(function(t){G(n,t.trim(),J)}),j(f,"mouseup",h._onDrop),j(f,"touchend",h._onDrop),j(f,"touchcancel",h._onDrop),j(f,"pointercancel",h._onDrop),j(f,"selectstart",h),u.delay?(j(f,"mouseup",h._disableDelayedDrag),j(f,"touchend",h._disableDelayedDrag),j(f,"touchcancel",h._disableDelayedDrag),j(f,"mousemove",h._disableDelayedDrag),j(f,"touchmove",h._disableDelayedDrag),j(f,"pointermove",h._disableDelayedDrag),h._dragStartTimer=setTimeout(c,u.delay)):c())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),V(t,"mouseup",this._disableDelayedDrag),V(t,"touchend",this._disableDelayedDrag),V(t,"touchcancel",this._disableDelayedDrag),V(t,"mousemove",this._disableDelayedDrag),V(t,"touchmove",this._disableDelayedDrag),V(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,e){(e=e||("touch"==t.pointerType?t:null))?($={target:n,clientX:e.clientX,clientY:e.clientY},this._onDragStart($,"touch")):this.nativeDraggable?(j(n,"dragend",this),j(r,"dragstart",this._onDragStart)):this._onDragStart($,!0);try{E.selection?setTimeout(function(){E.selection.empty()}):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(){if(r&&n){var t=this.options;q(n,t.ghostClass,!0),q(n,t.dragClass,!1),F.active=this,Q(this,r,"start",n,r,g)}else this._nulling()},_emulateDragOver:function(){if(D&&(this._lastX!==D.clientX||this._lastY!==D.clientY)){this._lastX=D.clientX,this._lastY=D.clientY,X||z(o,"display","none");var t=E.elementFromPoint(D.clientX,D.clientY),e=t,n=M.length;if(e)do{if(e[_]){for(;n--;)M[n]({clientX:D.clientX,clientY:D.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);X||z(o,"display","")}},_onTouchMove:function(t){if($){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,a=t.touches?t.touches[0]:t,r=a.clientX-$.clientX+i.x,s=a.clientY-$.clientY+i.y,l=t.touches?"translate3d("+r+"px,"+s+"px,0)":"translate("+r+"px,"+s+"px)";if(!F.active){if(n&&P(A(a.clientX-this._lastX),A(a.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),y=!0,D=a,z(o,"webkitTransform",l),z(o,"mozTransform",l),z(o,"msTransform",l),z(o,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!o){var t,e=n.getBoundingClientRect(),i=z(n),a=this.options;q(o=n.cloneNode(!0),a.ghostClass,!1),q(o,a.fallbackClass,!0),q(o,a.dragClass,!0),z(o,"top",e.top-x(i.marginTop,10)),z(o,"left",e.left-x(i.marginLeft,10)),z(o,"width",e.width),z(o,"height",e.height),z(o,"opacity","0.8"),z(o,"position","fixed"),z(o,"zIndex","100000"),z(o,"pointerEvents","none"),a.fallbackOnBody&&E.body.appendChild(o)||r.appendChild(o),t=o.getBoundingClientRect(),z(o,"width",2*e.width-t.width),z(o,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var i=t.dataTransfer,o=this.options;this._offUpEvents(),m.checkPull(this,this,n,t)&&((a=ta(n)).draggable=!1,a.style["will-change"]="",z(a,"display","none"),q(a,this.options.chosenClass,!1),r.insertBefore(a,n),Q(this,r,"clone",n)),q(n,o.dragClass,!0),e?("touch"===e?(j(E,"touchmove",this._onTouchMove),j(E,"touchend",this._onDrop),j(E,"touchcancel",this._onDrop),j(E,"pointermove",this._onTouchMove),j(E,"pointerup",this._onDrop)):(j(E,"mousemove",this._onTouchMove),j(E,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",o.setData&&o.setData.call(this,i,n)),j(E,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var e,l,c,h,d=this.el,g=this.options,v=g.group,$=F.active,D=m===v,C=!1,S=g.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),g.dragoverBubble||t.stopPropagation()),!n.animated&&(y=!0,$&&!g.disabled&&(D?S||(h=!r.contains(n)):b===this||($.lastPullMode=m.checkPull(this,$,n,t))&&v.checkPut(this,$,n,t))&&(void 0===t.rootEl||t.rootEl===this.el))){if(I(t,g,this.el),O)return;if(e=H(t.target,g.draggable,d),l=n.getBoundingClientRect(),b!==this&&(b=this,C=!0),h){U($,!0),i=r,a||s?r.insertBefore(n,a||s):S||r.appendChild(n);return}if(0===d.children.length||d.children[0]===o||d===t.target&&(w=d,E=t,x=w.lastElementChild.getBoundingClientRect(),E.clientY-(x.top+x.height)>5||E.clientX-(x.left+x.width)>5)){if(0!==d.children.length&&d.children[0]!==o&&d===t.target&&(e=d.lastElementChild),e){if(e.animated)return;c=e.getBoundingClientRect()}U($,D),!1!==Z(r,d,n,l,e,c,t)&&(n.contains(d)||(d.appendChild(n),i=d),this._animate(l,n),e&&this._animate(c,e))}else if(e&&!e.animated&&e!==n&&void 0!==e.parentNode[_]){u!==e&&(u=e,f=z(e),p=z(e.parentNode));var w,E,x,N=(c=e.getBoundingClientRect()).right-c.left,k=c.bottom-c.top,B=T.test(f.cssFloat+f.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),Y=e.offsetWidth>n.offsetWidth,X=e.offsetHeight>n.offsetHeight,A=(B?(t.clientX-c.left)/N:(t.clientY-c.top)/k)>.5,P=e.nextElementSibling,R=!1;if(B){var M=n.offsetTop,L=e.offsetTop;R=M===L?e.previousElementSibling===n&&!Y||A&&Y:e.previousElementSibling===n||n.previousElementSibling===e?(t.clientY-c.top)/k>.5:L>M}else C||(R=P!==n&&!X||A&&X);var W=Z(r,d,n,l,e,c,t,R);!1!==W&&((1===W||-1===W)&&(R=1===W),O=!0,setTimeout(K,30),U($,D),n.contains(d)||(R&&!P?d.appendChild(n):e.parentNode.insertBefore(n,R?P:e)),i=n.parentNode,this._animate(l,n),this._animate(c,e))}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),z(e,"transition","none"),z(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,z(e,"transition","all "+n+"ms"),z(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){z(e,"transition",""),z(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;V(E,"touchmove",this._onTouchMove),V(E,"pointermove",this._onTouchMove),V(t,"mouseup",this._onDrop),V(t,"touchend",this._onDrop),V(t,"pointerup",this._onDrop),V(t,"touchcancel",this._onDrop),V(t,"pointercancel",this._onDrop),V(t,"selectstart",this)},_onDrop:function(t){var e=this.el,l=this.options;clearInterval(this._loopId),clearInterval(C.pid),clearTimeout(this._dragStartTimer),V(E,"mousemove",this._onTouchMove),this.nativeDraggable&&(V(E,"drop",this),V(e,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(y&&(t.preventDefault(),l.dropBubble||t.stopPropagation()),o&&o.parentNode&&o.parentNode.removeChild(o),(r===i||"clone"!==F.active.lastPullMode)&&a&&a.parentNode&&a.parentNode.removeChild(a),n&&(this.nativeDraggable&&V(n,"dragend",this),J(n),n.style["will-change"]="",q(n,this.options.ghostClass,!1),q(n,this.options.chosenClass,!1),Q(this,r,"unchoose",n,r,g),r!==i?(v=te(n,l.draggable))>=0&&(Q(null,i,"add",n,r,g,v),Q(this,r,"remove",n,r,g,v),Q(null,i,"sort",n,r,g,v),Q(this,r,"sort",n,r,g,v)):n.nextSibling!==s&&(v=te(n,l.draggable))>=0&&(Q(this,r,"update",n,r,g,v),Q(this,r,"sort",n,r,g,v)),F.active&&((null==v||-1===v)&&(v=g),Q(this,r,"end",n,r,g,v),this.save()))),this._nulling()},_nulling:function(){r=n=i=o=s=a=l=c=h=$=D=y=v=u=f=b=m=F.active=null,R.forEach(function(t){t.checked=!0}),R.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":var e;n&&(this._onDragOver(t),(e=t).dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault());break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)H(t=n[i],a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||tt(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var o=n.children[i];H(o,this.options.draggable,n)&&(e[t]=o)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return H(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&L(n)},destroy:function(){var t=this.el;t[_]=null,V(t,"mousedown",this._onTapStart),V(t,"touchstart",this._onTapStart),V(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(V(t,"dragover",this),V(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),M.splice(M.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},j(E,"touchmove",function(t){F.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){B={capture:!1,passive:!1}}}))}catch(tr){}return F.utils={on:j,off:V,css:z,find:G,is:function(t,e){return!!H(t,e,t)},extend:to,throttle:ti,closest:H,toggleClass:q,clone:ta,index:te},F.create=function(t,e){return new F(t,e)},F.version="1.6.1",F});